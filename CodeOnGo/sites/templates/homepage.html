<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}}</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="nav">
                <div class="logo">
                    <span class="logo-icon">üü£</span>
                    <span class="logo-text">CryptoTasks</span>
                </div>
                <div class="user-info">
                    {{if .IsLoggedIn}}
                    <div class="user-wallet">
                        <!-- –ò—Å–ø–æ–ª—å–∑—É–µ–º TotalBalance –≤–º–µ—Å—Ç–æ User.Balance -->
                        <span class="wallet-balance">{{printf "%.2f" .TotalBalance}} EC</span>
                        <span class="user-name">{{.User.Username}}</span>
                    </div>
                    <a href="/account" class="account-btn" title="–ú–æ–π –∞–∫–∫–∞—É–Ω—Ç">
                        <div class="user-avatar">
                            <div class="avatar">üë§</div>
                        </div>
                    </a>
                    {{else}}
                    <div class="user-wallet">
                        <span class="wallet-balance">0.00 EC</span>
                        <span class="user-name">–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω</span>
                    </div>
                    <a href="/login" class="account-btn" title="–í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç">
                        <div class="user-avatar">
                            <div class="avatar">üîê</div>
                        </div>
                    </a>
                    {{end}}
                </div>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">
                    <span class="gradient-text">–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π Easy Coin</span>
                    –≤—ã–ø–æ–ª–Ω—è—è –∑–∞–¥–∞–Ω–∏—è
                </h1>
                <p class="hero-subtitle">Easy Coin (EC) - –ø—Ä–æ—Å—Ç–∞—è –∏ –¥–æ—Å—Ç—É–ø–Ω–∞—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ</p>
                
                <!-- –ë–ª–æ–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ Easy Coin -->
                <div class="easycoin-info" style="background: rgba(147, 51, 234, 0.1); padding: 2rem; border-radius: 15px; margin: 2rem 0; border: 1px solid rgba(147, 51, 234, 0.3);">
                    <h3 style="color: #9333ea; margin-bottom: 1rem;">üü£ –ß—Ç–æ —Ç–∞–∫–æ–µ Easy Coin?</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; text-align: left;">
                        <div>
                            <strong>üéØ –ü—Ä–æ—Å—Ç–æ—Ç–∞</strong>
                            <p style="margin: 0.5rem 0; font-size: 0.9rem;">–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–∞—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞</p>
                        </div>
                        <div>
                            <strong>‚ö° –°–∫–æ—Ä–æ—Å—Ç—å</strong>
                            <p style="margin: 0.5rem 0; font-size: 0.9rem;">–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</p>
                        </div>
                        <div>
                            <strong>üí∞ –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å</strong>
                            <p style="margin: 0.5rem 0; font-size: 0.9rem;">–ù–∏–∑–∫–∏–µ –∫–æ–º–∏—Å—Å–∏–∏</p>
                        </div>
                    </div>
                    
                    <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
                    <div style="margin-top: 1.5rem;">
                        <a href="/easycoin" class="btn" style="background: linear-gradient(45deg, #9333ea, #7c3aed); color: white; text-decoration: none; padding: 0.8rem 1.5rem; border-radius: 10px; font-weight: 600;">
                            üìñ –£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ Easy Coin
                        </a>
                    </div>
                </div>

                <div class="hero-stats">
                    <div class="stat-card">
                        <div class="stat-value">{{.Stats.total_users}}+</div>
                        <div class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">{{.Stats.active_tasks}}</div>
                        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">{{.Stats.online_now}}</div>
                        <div class="stat-label">–û–Ω–ª–∞–π–Ω —Å–µ–π—á–∞—Å</div>
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                <div class="navigation" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 3rem;">
                    {{if .IsLoggedIn}}
                    <a href="/tap" class="btn btn-primary" style="font-size: 1.2rem; padding: 1.5rem; text-align: center; background: linear-gradient(45deg, #9333ea, #7c3aed);">
                        üü£ –ù–∞—á–∞—Ç—å —Ç–∞–ø–∞—Ç—å EC 
                        <small style="display: block; font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.9;">
                            –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ —Ç–∞–ø–æ–º: <span id="tapBalance">{{.TapBalance | printf "%.2f"}}</span> EC
                        </small>
                    </a>
                    <a href="/account" class="btn btn-secondary" style="font-size: 1.2rem; padding: 1.5rem; text-align: center;">
                        üë§ –ú–æ–π –∞–∫–∫–∞—É–Ω—Ç
                        <small style="display: block; font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.9;">
                            –û–±—â–∏–π –±–∞–ª–∞–Ω—Å: {{printf "%.2f" .TotalBalance}} EC
                        </small>
                    </a>
                    {{else}}
                    <a href="/register" class="btn btn-primary" style="font-size: 1.2rem; padding: 1.5rem; text-align: center; background: linear-gradient(45deg, #9333ea, #7c3aed);">
                        üöÄ –ù–∞—á–∞—Ç—å –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å
                        <small style="display: block; font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.9;">
                            –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏ –ø–æ–ª—É—á–∏—Ç–µ 50 EC –±–æ–Ω—É—Å!
                        </small>
                    </a>
                    <a href="/login" class="btn btn-secondary" style="font-size: 1.2rem; padding: 1.5rem; text-align: center;">
                        üîê –í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç
                        <small style="display: block; font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.9;">
                            –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π–¥–∏—Ç–µ!
                        </small>
                    </a>
                    {{end}}
                </div>
            </div>
        </div>
    </section>

    <section class="tasks-section">
        <div class="container">
            <div class="section-header">
                <h2>–î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</h2>
                <div class="filter-tabs">
                    <button class="filter-tab active">–í—Å–µ</button>
                    <button class="filter-tab">–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ</button>
                    <button class="filter-tab">–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞</button>
                    <button class="filter-tab">–ö–æ–Ω—Ç–µ–Ω—Ç</button>
                </div>
            </div>

            <div class="tasks-grid">
                {{range .Tasks}}
                <div class="task-card {{.Difficulty}} {{.Status}}">
                    <div class="task-header">
                        <span class="task-category {{.Category}}">{{.Category}}</span>
                        <span class="task-difficulty {{.Difficulty}}">{{.Difficulty}}</span>
                    </div>
                    <h3 class="task-title">{{.Title}}</h3>
                    <p class="task-description">{{.Description}}</p>
                    <div class="task-footer">
                        <div class="task-reward">
                            <span class="reward-icon">üéØ</span>
                            <span class="reward-amount">{{.Reward}}</span>
                        </div>
                        {{if eq .Status "available"}}
                        <button class="btn-task" data-task="{{.ID}}">–í–∑—è—Ç—å –∑–∞–¥–∞–Ω–∏–µ</button>
                        {{else}}
                        <button class="btn-task completed" disabled>–í—ã–ø–æ–ª–Ω–µ–Ω–æ</button>
                        {{end}}
                    </div>
                </div>
                {{end}}
            </div>
        </div>
    </section>

    <section class="how-it-works">
        <div class="container">
            <h2>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</h3>
                    <p>–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –∏ –ø–æ–ª—É—á–∏—Ç–µ –±–æ–Ω—É—Å 50 EC</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3>–í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è</h3>
                    <p>–í—ã–±–∏—Ä–∞–π—Ç–µ –∑–∞–¥–∞–Ω–∏—è –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3>–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ EC</h3>
                    <p>–ü–æ–ª—É—á–∞–π—Ç–µ Easy Coin –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏–π</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <span class="logo-icon">üü£</span>
                    <span>CryptoTasks</span>
                </div>
                <div class="footer-links">
                    <a href="/contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                    <a href="/easycoin">–û Easy Coin</a>
                    <a href="/register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ —Å —Ç–∞–ø–∞–ª–∫–∏
        function updateTapBalance() {
            fetch('/api/get-balance')
                .then(response => response.json())
                .then(data => {
                    const balanceElement = document.getElementById('tapBalance');
                    if (balanceElement) {
                        balanceElement.textContent = data.balance.toFixed(2);
                    }
                })
                .catch(error => {
                    console.log('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞:', error);
                });
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö)
        {{if .IsLoggedIn}}
        setInterval(updateTapBalance, 3000);
        {{end}}

        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            {{if .IsLoggedIn}}
            updateTapBalance();
            {{end}}
        });
    </script>
    <script src="/static/js/script.js"></script>
</body>
</html>